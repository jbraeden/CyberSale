<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--
Created by CyberSale on 2016.04.22 
Copyright Â© 2016 CyberSale. All rights reserved.

Most Comments will be in this section in order to keep the xhtml consistent.
This page simply allows the user to change their password if desired. It will
prompt the user to change their password and will proceed to change it on the
backend.
-->
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">
    
    <ui:composition template="./template.xhtml">
        <ui:define name="title">CyberSale - Password Reset</ui:define>
        
            <!-- Body -->
            <ui:define name="content">
                <div class="body">
                    <h:form class="recover-form">
                        <h2>Reset Your Password</h2>
                        
                        <p:messages id="resetPwErrors" />
                        
                        <h:panelGrid columns="3" cellpadding="5" columnClasses="rightAlign, rightAlign, leftAlign">
                            <p:outputLabel for="password" value="Password:" />
                            <h:inputSecret id="password" value="#{customerManager.newPassword}"
                                        required="true" label="Password">
                                <f:validator validatorId="passwordValidator" />
                            </h:inputSecret>
                            <p:message for="password" display="icon" />

                            <p:outputLabel for="confirmPassword" value="Confirm Password:" />
                            <h:inputSecret id="confirmPassword" value="#{customerManager.confirmPassword}"
                                        required="true" label="Confirm Password">
                            </h:inputSecret>
                            <p:message for="confirmPassword" display="icon"/>                    
                        </h:panelGrid>
                        <br />
                        <br />
                        
                        <h:panelGrid columns="2" cellpadding="5px">
                            <p:commandButton class="myButton" value="Cancel"
                                             icon="ui-icon-circle-arrow-w"
                                             immediate="true"
                                             action="index?faces-redirect=true" />
                            
                            <p:commandButton class="myButton" id="submit" update="resetPwErrors"
                                             action="#{customerManager.resetPassword()}" 
                                             value="Login" />
                        </h:panelGrid>
                        
                        <br/>
                        <h:outputLabel value ="#{customerManager.statusMessage}" />                  
                    </h:form>
                </div>
            </ui:define>
        
        </ui:composition>

</html>
